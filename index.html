<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡¶á‡¶´‡¶§‡¶æ‡¶∞ ‡¶ï‡¶Æ‡ßç‡¶™‡¶æ‡¶∏ | ‡¶Æ‡ßá‡¶π‡ßá‡¶∞‡¶™‡ßÅ‡¶∞</title>
    
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link href="https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@300;400;600;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary: #10b981;
            --bg-dark: #0f172a;
            --accent: #f59e0b;
            --text-light: #f8fafc;
            --glass-border: rgba(255, 255, 255, 0.1);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Hind Siliguri', sans-serif; }
        body { background-color: var(--bg-dark); color: var(--text-light); overflow: hidden; }

        /* ===== ‡¶∏‡ßç‡¶™‡ßç‡¶≤‡ßç‡¶Ø‡¶æ‡¶∂ ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶® ===== */
        #splash-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(circle at center, #1e293b 0%, #0f172a 100%);
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            z-index: 9999; transition: opacity 1s ease;
        }
        .crescent-glow { font-size: 3rem; margin-bottom: 20px; filter: drop-shadow(0 0 15px rgba(245, 158, 11, 0.6)); animation: float 3s infinite; }
        .loader-bar { width: 150px; height: 3px; background: rgba(255,255,255,0.1); border-radius: 10px; overflow: hidden; position: relative; }
        .loader-bar::after { content: ''; position: absolute; left: -100%; width: 100%; height: 100%; background: var(--primary); animation: loading 2s infinite; }
        
        @keyframes loading { 0% { left: -100%; } 100% { left: 100%; } }
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }

        /* ===== ‡¶∂‡¶æ‡¶ü‡¶°‡¶æ‡¶â‡¶® ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶® ===== */
        #shutdown-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #020617; display: none; flex-direction: column;
            justify-content: center; align-items: center; z-index: 10000; padding: 30px; text-align: center;
        }

        /* ===== ‡¶≤‡ßã‡¶ï‡ßá‡¶∂‡¶® ‡¶ö‡ßü‡ßá‡¶∏ ‡¶Æ‡ßã‡¶°‡¶æ‡¶≤ ===== */
        #location-prompt {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(15, 23, 42, 0.9); backdrop-filter: blur(10px);
            display: none; flex-direction: column; justify-content: center; align-items: center;
            z-index: 9000; padding: 25px; text-align: center;
        }
        .prompt-card { background: #1e293b; padding: 2.5rem 1.5rem; border-radius: 24px; border: 1px solid var(--glass-border); max-width: 350px; box-shadow: 0 20px 50px rgba(0,0,0,0.5); }
        .btn-prompt { padding: 14px 24px; border-radius: 30px; border: none; font-weight: 700; cursor: pointer; margin: 8px 0; width: 100%; font-size: 1rem; transition: transform 0.2s; }
        .btn-prompt:active { transform: scale(0.95); }
        .btn-gps { background: var(--primary); color: white; }
        .btn-skip { background: rgba(255,255,255,0.05); color: #94a3b8; border: 1px solid var(--glass-border); }

        /* ‡¶Æ‡ßá‡¶á‡¶® ‡¶á‡¶®‡ßç‡¶ü‡¶æ‡¶∞‡¶´‡ßá‡¶∏ */
        #app-container { height: 100vh; display: flex; flex-direction: column; visibility: hidden; }
        header {
            padding: 0.75rem 1rem; background: rgba(15, 23, 42, 0.95); backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--glass-border); display: flex;
            justify-content: space-between; align-items: center; z-index: 1000;
        }
        .logo { font-size: 1.1rem; color: var(--primary); font-weight: 700; letter-spacing: 0.5px; }
        .countdown-banner { background: rgba(16, 185, 129, 0.15); text-align: center; padding: 8px; font-size: 0.85rem; color: var(--accent); font-weight: 600; border-bottom: 1px solid var(--glass-border); }
        
        #map { flex-grow: 1; width: 100%; background: #0f172a; }
        
        .footer-credit {
            position: absolute; bottom: 20px; left: 50%; transform: translateX(-50%);
            z-index: 1000; background: rgba(15, 23, 42, 0.85); backdrop-filter: blur(10px);
            padding: 8px 16px; border-radius: 20px; border: 1px solid var(--glass-border);
            font-size: 0.75rem; color: #94a3b8; text-align: center; width: max-content;
        }
        .footer-credit a { color: var(--primary); text-decoration: none; font-weight: 700; }

        .btn-header { padding: 6px 14px; border-radius: 15px; font-weight: 600; font-size: 0.75rem; cursor: pointer; border: none; text-decoration: none; display: inline-flex; align-items: center; }
        .btn-report { background: var(--primary); color: white; }
        .btn-donate { background: var(--accent); color: #000; margin-left: 5px; }
        
        /* ‡¶™‡¶™‡¶Ü‡¶™ ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ */
        .leaflet-popup-content-wrapper { background: #1e293b; color: white; border-radius: 12px; padding: 5px; }
        .leaflet-popup-tip { background: #1e293b; }
        .btn-nav { display: block; width: 100%; text-align: center; background: var(--primary); color: white !important; text-decoration: none; padding: 10px; border-radius: 8px; font-size: 0.85rem; font-weight: 600; margin-top: 10px; }

        /* ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶≤‡ßã‡¶ï‡ßá‡¶∂‡¶® ‡¶Æ‡¶æ‡¶∞‡ßç‡¶ï‡¶æ‡¶∞ ‡¶è‡¶®‡¶ø‡¶Æ‡ßá‡¶∂‡¶® */
        .user-location-marker {
            width: 15px; height: 15px; background: #3b82f6; border: 3px solid white;
            border-radius: 50%; box-shadow: 0 0 15px rgba(59, 130, 246, 1);
            animation: pulse-blue 2s infinite;
        }
        @keyframes pulse-blue {
            0% { box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.7); }
            70% { box-shadow: 0 0 0 15px rgba(59, 130, 246, 0); }
            100% { box-shadow: 0 0 0 0 rgba(59, 130, 246, 0); }
        }
    </style>
</head>
<body>

    <!-- ‡¶∂‡¶æ‡¶ü‡¶°‡¶æ‡¶â‡¶® ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶® -->
    <div id="shutdown-screen">
        <div style="font-size: 4rem; color: #6366f1; margin-bottom: 20px;">‚ú®</div>
        <h2 id="shutdown-title">‡¶á‡¶´‡¶§‡¶æ‡¶∞‡ßá‡¶∞ ‡¶∏‡¶Æ‡ßü ‡¶∂‡ßá‡¶∑</h2>
        <p id="shutdown-msg" style="color: #94a3b8; line-height: 1.6; margin-top: 15px;">‡¶Ü‡¶ú‡¶ï‡ßá‡¶∞ ‡¶§‡¶•‡ßç‡¶Ø ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶¨‡¶®‡ßç‡¶ß‡•§ ‡¶Ü‡¶ó‡¶æ‡¶Æ‡ßÄ‡¶ï‡¶æ‡¶≤ ‡ßß‡ß®:‡ß¶‡ßß PM-‡¶è ‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®‡•§</p>
    </div>

    <!-- ‡¶∏‡ßç‡¶™‡ßç‡¶≤‡ßç‡¶Ø‡¶æ‡¶∂ ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶® -->
    <div id="splash-screen">
        <div class="crescent-glow">üåô</div>
        <h1 style="margin-bottom: 20px;">‡¶Æ‡ßç‡¶Ø‡¶æ‡¶™ ‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá‚Ä¶</h1></h1>
        <div class="loader-bar"></div>
    </div>

    <!-- ‡¶≤‡ßã‡¶ï‡ßá‡¶∂‡¶® ‡¶ö‡ßü‡ßá‡¶∏ ‡¶Æ‡ßã‡¶°‡¶æ‡¶≤ -->
    <div id="location-prompt">
        <div class="prompt-card">
            <div style="font-size: 3.5rem; margin-bottom: 15px;">üìç</div>
            <h3 style="margin-bottom: 12px; font-size: 1.4rem;">‡¶≤‡ßã‡¶ï‡ßá‡¶∂‡¶® ‡¶™‡¶æ‡¶∞‡¶Æ‡¶ø‡¶∂‡¶®</h3>
            <p style="color: #94a3b8; font-size: 0.95rem; margin-bottom: 25px; line-height: 1.5;">
                ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶∏‡¶†‡¶ø‡¶ï ‡¶Ö‡¶¨‡¶∏‡ßç‡¶•‡¶æ‡¶® ‡¶ú‡¶æ‡¶®‡¶§‡ßá ‡¶´‡ßã‡¶®‡ßá‡¶∞ GPS ‡¶Ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®‡•§ <br><br>
                <small style="color: var(--accent);">‡¶ü‡¶ø‡¶™‡¶∏: ‡¶≠‡¶æ‡¶≤‡ßã ‡¶Ö‡¶≠‡¶ø‡¶ú‡ßç‡¶û‡¶§‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø Chrome ‡¶¨‡¶æ Safari ‡¶¨‡ßç‡¶∞‡¶æ‡¶â‡¶ú‡¶æ‡¶∞‡ßá ‡¶ì‡¶™‡ßá‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®‡•§</small>
            </p>
            <button class="btn-prompt btn-gps" onclick="enableGPS()">‡¶≤‡ßã‡¶ï‡ßá‡¶∂‡¶® ‡¶Ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</button>
            <button class="btn-prompt btn-skip" onclick="skipGPS()">‡¶è‡¶ñ‡¶® ‡¶®‡¶æ, ‡¶è‡ßú‡¶ø‡ßü‡ßá ‡¶Ø‡¶æ‡¶®</button>
        </div>
    </div>

    <div id="app-container">
        <header>
            <div class="logo">‡¶á‡¶´‡¶§‡¶æ‡¶∞ ‡¶ï‡¶Æ‡ßç‡¶™‡¶æ‡¶∏</div>
            <div>
                <a href="https://wa.me/8801644547079?text=‡¶Ü‡¶∏‡¶∏‡¶æ‡¶≤‡¶æ‡¶Æ‡ßÅ%20‡¶Ü‡¶≤‡¶æ‡¶á‡¶ï‡ßÅ‡¶Æ,%20‡¶Ü‡¶Æ‡¶ø%20‡¶á‡¶´‡¶§‡¶æ‡¶∞‡ßá‡¶∞%20‡¶®‡¶§‡ßÅ‡¶®%20‡¶§‡¶•‡ßç‡¶Ø%20‡¶¶‡¶ø‡¶§‡ßá%20‡¶ö‡¶æ‡¶á:" class="btn-header btn-report">‡¶§‡¶•‡ßç‡¶Ø ‡¶¶‡¶ø‡¶®</a>
                <button class="btn-header btn-donate" onclick="alert('‡¶¨‡¶ø‡¶ï‡¶æ‡¶∂/‡¶®‡¶ó‡¶¶: +8801644547079')">‡¶¶‡¶æ‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</button>
            </div>
        </header>

        <div class="countdown-banner" id="countdown-timer">
            ‡¶Æ‡ßá‡¶π‡ßá‡¶∞‡¶™‡ßÅ‡¶∞‡ßá ‡¶á‡¶´‡¶§‡¶æ‡¶∞‡ßá‡¶∞ ‡¶∏‡¶Æ‡ßü ‡¶¨‡¶æ‡¶ï‡¶ø --h:--m:--s
        </div>

        <div id="map"></div>

        <div class="footer-credit">
            ¬© <a href="https://fb.com/anonymous.istiack" target="_blank">‡¶á‡¶∏‡¶§‡¶ø‡ßü‡¶æ‡¶ï ‡¶Ü‡¶π‡¶Æ‡ßá‡¶¶ ‡¶ñ‡¶æ‡¶Å‡¶®</a>
        </div>
    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <script>
        const MEHERPUR_LAT = 23.7667;
        const MEHERPUR_LNG = 88.6333;

        // ‡¶á‡¶´‡¶§‡¶æ‡¶∞ ‡¶ï‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶°‡¶æ‡¶∞ (‡ß®‡ß¶‡ß®‡ß¨)
        const IFTAR_CALENDAR = {
            "2026-02-19": "18:04", "2026-02-20": "18:04", "2026-02-21": "18:05", "2026-02-22": "18:05",
            "2026-02-23": "18:06", "2026-02-24": "18:06", "2026-02-25": "18:07", "2026-02-26": "18:07",
            "2026-02-27": "18:08", "2026-02-28": "18:08", "2026-03-01": "18:09", "2026-03-02": "18:09",
            "2026-03-03": "18:10", "2026-03-04": "18:10", "2026-03-05": "18:11", "2026-03-06": "18:11",
            "2026-03-07": "18:12", "2026-03-08": "18:12", "2026-03-09": "18:12", "2026-03-10": "18:13",
            "2026-03-11": "18:13", "2026-03-12": "18:14", "2026-03-13": "18:14", "2026-03-14": "18:15",
            "2026-03-15": "18:15", "2026-03-16": "18:15", "2026-03-17": "18:16", "2026-03-18": "18:16",
            "2026-03-19": "18:17", "2026-03-20": "18:17"
        };

        // ‡ßß‡ß¨‡ß™ ‡¶®‡¶Ç ‡¶≤‡¶æ‡¶á‡¶® - ‡¶á‡¶´‡¶§‡¶æ‡¶∞ ‡¶™‡ßü‡ßá‡¶®‡ßç‡¶ü‡¶∏‡¶Æ‡ßÇ‡¶π
        const IFTAR_LOCATIONS = [
            
        ];

        let map;

        window.onload = () => {
            const now = new Date();
            const eidDate = new Date("2026-03-21");

            if (now >= eidDate) {
                showShutdown("‡¶à‡¶¶ ‡¶Æ‡ßã‡¶¨‡¶æ‡¶∞‡¶ï!", "‡¶∏‡¶¨‡¶æ‡¶á‡¶ï‡ßá ‡¶™‡¶¨‡¶ø‡¶§‡ßç‡¶∞ ‡¶à‡¶¶‡ßÅ‡¶≤ ‡¶´‡¶ø‡¶§‡¶∞‡ßá‡¶∞ ‡¶∂‡ßÅ‡¶≠‡ßá‡¶ö‡ßç‡¶õ‡¶æ‡•§");
                return;
            }

            const today = now.toISOString().split('T')[0];
            const iftarTimeStr = IFTAR_CALENDAR[today];

            if (iftarTimeStr) {
                const [h, m] = iftarTimeStr.split(':');
                const iftarDate = new Date();
                iftarDate.setHours(h, m, 0);
                
                const activation = new Date();
                activation.setHours(12, 1, 0);

                if (now > iftarDate || now < activation) {
                    showShutdown("‡¶á‡¶´‡¶§‡¶æ‡¶∞‡ßá‡¶∞ ‡¶∏‡¶Æ‡ßü ‡¶∂‡ßá‡¶∑", "‡¶Ü‡¶≤‡¶π‡¶æ‡¶Æ‡¶¶‡ßÅ‡¶≤‡¶ø‡¶≤‡ßç‡¶≤‡¶æ‡¶π, ‡¶Ü‡¶ú‡¶ï‡ßá‡¶∞ ‡¶∞‡ßã‡¶ú‡¶æ ‡¶∏‡¶Æ‡ßç‡¶™‡¶®‡ßç‡¶® ‡¶π‡ßü‡ßá‡¶õ‡ßá‡•§ ‡¶Ü‡¶ó‡¶æ‡¶Æ‡ßÄ‡¶ï‡¶æ‡¶≤ ‡ßß‡ß®:‡ß¶‡ßß PM ‡¶è ‡¶®‡¶§‡ßÅ‡¶® ‡¶§‡¶•‡ßç‡¶Ø ‡¶Ü‡¶∏‡¶¨‡ßá‡•§");
                    return;
                }
                startCountdown(iftarDate);
            }

            // ‡ß© ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶° ‡¶∏‡ßç‡¶™‡ßç‡¶≤‡ßç‡¶Ø‡¶æ‡¶∂ ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶® ‡¶¶‡ßá‡¶ñ‡¶ø‡ßü‡ßá ‡¶™‡ßç‡¶∞‡¶Æ‡ßç‡¶™‡¶ü ‡¶Ü‡¶∏‡¶¨‡ßá
            setTimeout(() => {
                document.getElementById('splash-screen').style.opacity = '0';
                setTimeout(() => {
                    document.getElementById('splash-screen').style.display = 'none';
                    document.getElementById('location-prompt').style.display = 'flex';
                }, 500);
            }, 3000);
        };

        function enableGPS() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(
                    (pos) => startApp(pos.coords.latitude, pos.coords.longitude),
                    (err) => {
                        console.warn("GPS Error:", err.message);
                        startApp(null, null);
                    },
                    { enableHighAccuracy: true }
                );
            } else {
                startApp(null, null);
            }
        }

        function skipGPS() {
            startApp(null, null);
        }

        function startApp(lat, lng) {
            document.getElementById('location-prompt').style.display = 'none';
            document.getElementById('app-container').style.visibility = 'visible';
            
            // ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶™ ‡¶á‡¶®‡¶ø‡¶∂‡¶ø‡ßü‡¶æ‡¶≤‡¶æ‡¶á‡¶ú (‡¶°‡¶ø‡¶´‡¶≤‡ßç‡¶ü ‡¶Æ‡ßá‡¶π‡ßá‡¶∞‡¶™‡ßÅ‡¶∞)
            map = L.map('map', { zoomControl: false, attributionControl: false }).setView([MEHERPUR_LAT, MEHERPUR_LNG], 14);
            L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png').addTo(map);

            // ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶≤‡ßã‡¶ï‡ßá‡¶∂‡¶® ‡¶Æ‡¶æ‡¶∞‡ßç‡¶ï‡¶æ‡¶∞ (‡¶Ø‡¶¶‡¶ø ‡¶•‡¶æ‡¶ï‡ßá)
            if (lat && lng) {
                const userIcon = L.divIcon({ className: 'user-location-marker', iconSize: [15, 15] });
                L.marker([lat, lng], { icon: userIcon }).addTo(map);
                map.setView([lat, lng], 15);
            }

            // ‡¶á‡¶´‡¶§‡¶æ‡¶∞ ‡¶™‡ßü‡ßá‡¶®‡ßç‡¶ü ‡¶Æ‡¶æ‡¶∞‡ßç‡¶ï‡¶æ‡¶∞ ‡¶¨‡¶∏‡¶æ‡¶®‡ßã
            IFTAR_LOCATIONS.forEach(loc => {
                L.marker([loc.lat, loc.lng]).bindPopup(`
                    <div style="text-align:center; padding: 5px;">
                        <b style="color:var(--accent); font-size: 1rem;">${loc.org}</b><br>
                        <a href="https://www.google.com/maps/dir/?api=1&destination=${loc.lat},${loc.lng}" target="_blank" class="btn-nav">‡¶®‡¶≠‡¶ø‡¶ó‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®</a>
                    </div>
                `).addTo(map);
            });
        }

        function showShutdown(title, msg) {
            document.getElementById('splash-screen').style.display = 'none';
            document.getElementById('shutdown-title').innerText = title;
            document.getElementById('shutdown-msg').innerHTML = msg;
            document.getElementById('shutdown-screen').style.display = 'flex';
        }

        function startCountdown(target) {
            function update() {
                const diff = target - new Date();
                if (diff <= 0) { location.reload(); return; }
                const h = Math.floor(diff / 3600000);
                const m = Math.floor((diff % 3600000) / 60000);
                const s = Math.floor((diff % 60000) / 1000);
                document.getElementById('countdown-timer').innerText = `‡¶Æ‡ßá‡¶π‡ßá‡¶∞‡¶™‡ßÅ‡¶∞‡ßá ‡¶á‡¶´‡¶§‡¶æ‡¶∞‡ßá‡¶∞ ‡¶∏‡¶Æ‡ßü ‡¶¨‡¶æ‡¶ï‡¶ø ${h}h:${m}m:${s}s`;
            }
            setInterval(update, 1000);
            update();
        }
    </script>
</body>
</html>
